![](src/Cover.png)
<p align="center">
<img src="https://img.shields.io/github/stars/Moemu/Muice-Chatbot" alt="Stars">
<img src="https://img.shields.io/badge/Model-ChatGLM2--6B-green" alt="Model">
<img src="https://img.shields.io/badge/Python-3.10-blue" alt="Python">
</p>


# ä»‹ç´¹âœ¨

æ²é›ªï¼Œä¸€éš»æœƒ**ä¸»å‹•**æ‰¾ä½ èŠå¤©çš„AIå¥³å­©å­ï¼Œå…¶å°è©±æ¨¡å‹åŸºæ–¼ [ChatGLM2-6B](https://github.com/THUDM/ChatGLM2-6B) å¾®èª¿è€Œæˆï¼Œè¨“ç·´é›†é•·åº¦1.3K+ *ï¼Œå…·æœ‰äºŒæ¬¡å…ƒå¥³å­©å­çš„èªªè©±é¢¨æ ¼ï¼Œæ¯”è¼ƒå‚²å¬Œï¼Œä½†æ¨‚æ–¼å’Œä½ åˆ†äº«ç”Ÿæ´»çš„ç‘£ç¢ï¼Œæ¯å¤©æœƒçµ¦ä½ ä¸ä¸€æ¨£çš„å•å€™ã€‚

*ï¼šï¼ˆè¨“ç·´é›†é•·åº¦è¼ƒä½ï¼Œä½†æˆ‘å€‘ä»åœ¨æ”¶é›†å°è©±æ•¸æ“šï¼‰

# åŠŸèƒ½ğŸª„

âœ” æä¾›æœ¬äººç”± 1.3k+ å°è©±æ•¸æ“šå¾®èª¿çš„ ChatGLM2-6B P-Tuning V2 æ¨¡å‹ï¼ˆå›ç­”åŸå‰µç‡ï¼š98%+ï¼‰

âœ” ä¸»å‹•ç™¼èµ·èŠå¤©ï¼ˆå±€é™æ–¼å·²æœ‰çš„ Promptï¼‰

âœ” æä¾›5æ¢å¯ç”¨çš„å‘½ä»¤

# ä½¿ç”¨å‰é ˆçŸ¥âš ï¸
- **æœ¬é …ç›®ä¸é©åˆé›¶åŸºç¤çš„å°ç™½ä½¿ç”¨!**
- è©²é …ç›®ä¾è³´ pytorchï¼Œè‹¥ä¸ä½¿ç”¨æ”¯æ´  [ CUDA ï¼ˆCompute Unified Device Architectureï¼Œçµ±ä¸€è¨ˆç®—æ¶æ§‹ï¼‰ ](https://developer.nvidia.com/about-cuda) çš„é¡¯å¡ï¼ˆNVIDIA ç³»åˆ—é¡¯ç¤ºå¡ï¼‰ï¼Œè™•ç†æ•ˆç‡æœƒå¤§å¹…é™ä½ã€‚



# Windows ç‰ˆæœ¬å®‰è£åŠé…ç½®æŒ‡å—ğŸªŸ

## 1. æœ€ä½³ç³»çµ±é…ç½®
- ä½œæ¥­ç³»çµ±ï¼šWindows 10 åŠä»¥ä¸Š/Windows Server 2012 åŠä»¥ä¸Š
- è™•ç†å™¨ï¼šx86 æ¶æ§‹ï¼ˆARM å¯èƒ½æœƒå‡ºç¾æ„æ–™ä¹‹å¤–çš„å•é¡Œï¼‰
- é¡¯ç¤ºå¡ï¼šæ”¯æ´ CUDA é‹ç®—ï¼Œ16GB åŠä»¥ä¸Šé¡¯ç¤ºè¨˜æ†¶é«”ï¼ˆåœ¨æ—¥å¾Œçš„æ›´æ–°ä¸­ï¼Œå°‡æœƒé‡å°é¡¯ç¤ºè¨˜æ†¶é«”éœ€æ±‚é«˜çš„å•é¡Œé€²è¡Œå„ªåŒ–ï¼‰

## 2. é…ç½®é‹è¡Œç’°å¢ƒ

###  å®‰è£ Python 3.10.9

#### 1. å¾ [Python.org](https://www.python.org/downloads/release/python-3109/) ä¸‹è¼‰é©åˆæ‚¨ç³»çµ±çš„å®‰è£åŒ…
#### 2. å®‰è£é¸é …é¸æ“‡ ```Install for All Users``` åŠ ```Add to PATH```
#### 3. å®Œæˆå®‰è£

### å®‰è£ conda
#### 1. å¾ [Anacoda.com](https://www.anaconda.com/download/) ä¸‹è¼‰é©åˆæ‚¨ç³»çµ±çš„å®‰è£åŒ…
#### 2. å®‰è£é¸é …é¸æ“‡```Install for All Users``` åŠ ```Add to PATH```

### æ·»åŠ  conda è‡³ç³»çµ±ç’°å¢ƒè®Šé‡ä¸­
#### 1. å³éµé»æŒ‰```æœ¬æ©Ÿ```ï¼ˆ```This PC```ï¼‰âˆ’âˆ’>```å†…å®¹```ï¼ˆ```Porperties```ï¼‰
#### 2. æ‰¾åˆ°```é«˜ç´šç³»çµ±è¨­å®š```ï¼ˆ```Advanced System Settings```ï¼‰âˆ’âˆ’>```ç’°å¢ƒè®Šé‡```ï¼ˆ```Environment Variables...``ï¼‰
#### 3. åœ¨ ```ç”¨æˆ¶è®Šé‡```ï¼ˆ```User variables for [Your Username]``` ï¼‰ä¸­ æ‰¾åˆ° ```Path```ä¸€æ¬„ï¼Œé»é¸```ç·¨è¼¯```ï¼ˆ```Edit```ï¼‰âˆ’âˆ’>```æ–°å¢```ï¼ˆ```New```ï¼‰ï¼Œæ–°å¢ Anacoda è·¯å¾‘ã€‚ï¼ˆé è¨­è·¯å¾‘ç‚º```C:\ProgramData\anaconda3\Library\bin```ã€```C:\ProgramData\anaconda3\Scripts```å’Œ```C:\ProgramData\anaconda3```ï¼Œé€™ä¸‰è€…éƒ½éœ€è¦æ–°å¢åˆ°Pathä¸­ï¼‰

### å®‰è£ Pytorch
#### 1. å¾ [Pytorch.org](https://pytorch.org/get-started/locally/) ç”¢ç”Ÿä¸¦è¤‡è£½é©åˆæ‚¨è¨­å‚™çµ±çš„å‘½ä»¤ï¼ˆè«‹åœ¨```Package```ä¸€æ¬„ä¸­é¸æ“‡```conda```ï¼Œåœ¨```Language```ä¸€æ¬„ä¸­é¸æ“‡```Python```ï¼›è‹¥æ‚¨çš„é¡¯ç¤ºå¡æ”¯æ´ CUDAï¼Œè«‹åœ¨```Compute Platform```ä¸€æ¬„é¸æ“‡ç›¸æ‡‰çš„ CUDA ç‰ˆæœ¬ï¼Œå¦å‰‡é¸```CPU```ï¼‰
#### 2. åœ¨æ‚¨çš„è¨­å‚™ä¸Šä½¿ç”¨ç®¡ç†å“¡æ¬Šé™å•“å‹• ```å‘½ä»¤æç¤ºå­—å…ƒ```ï¼ˆ```cmd```ï¼‰ï¼Œè²¼ä¸Šä¸Šä¸€æ­¥è¤‡è£½çš„å®‰è£å‘½ä»¤ï¼Œç­‰å¾…å®‰è£å®Œæˆ


## 3. å®‰è£åŠé…ç½®é …ç›®

### ä½¿ç”¨ conda

#### åœ¨ Powershell ä¸­é‹è¡Œä¸‹åˆ—å‘½ä»¤ï¼š

```Powershell
git clone https://github.com/Moemu/Muice-Chatbot
cd Muice-Chatbot
conda create --name Muice python=3.10.9
conda activate Muice
pip install -r requirements.txt
```

### å…‹éš†æ¨¡å‹

#### åœ¨ä¸Šä¸€æ­¥ç”¢ç”Ÿçš„ Muice-Chatbot è³‡æ–™å¤¾ä¸­é‹è¡Œä¸‹åˆ—å‘½ä»¤ï¼š
```
mkdir model
cd model
git lfs install
git clone https://huggingface.co/THUDM/chatglm2-6b
cd ..
```
æª”æ¡ˆè¼ƒå¤§ï¼Œä¸‹è¼‰éœ€æ™‚è¼ƒä¹…ï¼Œè«‹è€å¿ƒç­‰å¾…ã€‚

### ä¸‹è¼‰å¾®èª¿å¾Œçš„æ¨¡å‹å£“ç¸®æª”

å¾ [Releases](https://github.com/Moemu/Muice-Chatbot/releases)ä¸‹è¼‰å¾®èª¿å¾Œçš„æ¨¡å‹å£“ç¸®æª”ï¼Œè§£å£“ç¸®å¾Œå°‡å…¶é‡æ–°å‘½åç‚º`Muice`ä¸¦ç½®æ–¼`model`è³‡æ–™å¤¾ä¸­


### é…ç½® go-cqhttp
æœ¬é …ç›®ç›®ä½¿ç”¨[go-cqhttp](https://github.com/Mrs4s/go-cqhttp)é€²è¡Œæ©Ÿå™¨äººäº¤äº’ï¼Œè¯·ä»å…¶ [Releases](https://github.com/Mrs4s/go-cqhttp/releases) ä¸­ä¸‹è¼‰ç›¸æ‡‰çš„ç‰ˆæœ¬åŠè™•ç†ç¨‹å¼ï¼Œä¸¦ç½®æ–¼ `qqbot` è³‡æ–™å¤¾ä¸­

æœ‰é—œ go-cqhttp çš„è©³ç´°é…ç½®æ–¹æ³•åŠå•é¡Œï¼Œè«‹è¨ªå• [go-cqhttp ä¸»é ](https://docs.go-cqhttp.org/) åŠå…¶ [Github é é¢](https://github.com/Mrs4s/go-cqhttp)

### æª”æ¡ˆçµæ§‹
åœ¨æœ€å¾Œï¼Œæ‚¨æ‡‰è©²å¾—åˆ°é¡ä¼¼å¦‚ä¸‹æ‰€ç¤ºçš„æª”æ¡ˆçµæ§‹ï¼š
```
Muice-Chatbot    <- ä¸»è·¯å¾‘
 â”œâ”€llm
 â”œâ”€model
 â”‚  â”œâ”€ chatglm2-6b
 â”‚  â””â”€ Muice
 â”œâ”€qqbot
 â”‚  â”œâ”€go-cqhttp.exe
 â”‚  â””â”€...
 â”œâ”€configs.json  <- Muice è¨­å®šæª”
 â”œâ”€main.py       <- ä¸»è™•ç†ç¨‹å¼
 â””â”€requirements.txt
```

### é…ç½® Muice
æœ¬é …ç›®ä½¿ç”¨`configs.json`ä½œç‚ºè¨­å®šæª”ï¼Œç›®å‰æ”¯æ´å¦‚ä¸‹åŠŸèƒ½ï¼š

```json
{
    // ä¿¡ä»»QQå·åˆ—è¡¨ï¼Œåªæœ‰åœ¨åˆ—è¡¨çš„QQå·ï¼Œæ²é›ªæ‰ä¼šå›å¤
    "Trust_QQ_list": [
        123456789,
        987654321
    ],
    // æ˜¯å¦è‡ªåŠ¨å‘èµ·æ–°å¯¹è¯ï¼Œé»˜è®¤ä»¥Trust_QQ_listçš„ç¬¬0é¡¹ä½œä¸ºå‘èµ·æ–°å¯¹è¯å¯¹è±¡
    "AutoCreateTopic": false,
    // ä»æ–‡ä»¶ä¸­è¯»å–è®°å¿†ï¼Œç”¨äºé¡¹ç›®é‡å¯ååŠ è½½åŸæ¥çš„è®°å¿†
    "read_memory_from_file": true,
    // æ¦‚ç‡ï¼šéšæœºå‘èµ·ä¸€ä¸ªå·²çŸ¥çš„è¯é¢˜
    "known_topic_probability": "0.003",
    // æ¦‚ç‡ï¼šæ—©ã€ä¸­ã€å‚ã€æ™šè§¦å‘æ—¥å¸¸é—®å€™
    "time_topic_probability": "0.75"
}
```

## 4. å•“å‹•
åœ¨æ ¹è·¯å¾‘ï¼ˆ```Muice-Chatbot ```è³‡æ–™å¤¾ï¼‰ä¸­é–‹å•“ Powershellï¼Œé€è¡Œéµå…¥ä»¥ä¸‹å‘½ä»¤ï¼š
```powershell
conda activate Muice
python main.py
```

# å‘½ä»¤ğŸ•¹ï¸

|  å‘½ä»¤   | é‡‹ç¾©  |
|  ----  | ----  |
| /clean  | æ¸…ç©ºæœ¬è¼ªå°è©±æ­·å² |
| /refresh  | åˆ·æ–°æœ¬æ¬¡å°è©± |
| /help  | é¡¯ç¤ºæ‰€æœ‰å¯ç”¨çš„å‘½ä»¤åˆ—è¡¨ |
| /reset  | é‡ç½®æ‰€æœ‰å°è©±æ•¸æ“š(å°‡å­˜æª”å°è©±æ•¸æ“š) |
| /undo  | æ’¤éŠ·ä¸Šä¸€æ¬¡å°è©± |

# ç¤ºä¾‹å°è©±

Q: ä½ å¥½

> ä½ å¥½ï¼Œä½ ä»Šå¤©æ„Ÿè¦ºæ€éº¼æ¨£ï¼Ÿ

Q: ä½ çŸ¥é“è²“å¨˜å˜›

> å””...ä¸å¤ªçŸ¥é“å–µ...

Q: é›ªé›ªå–œæ­¡åƒä»€éº¼ï¼Ÿ

>åƒÂ·ä½ Â·è€Œå·²

Q: å·¥ä½œåˆå¿™åˆç´¯ï¼Œé‚„è¦åŠ ç­ä»€éº¼çš„ï¼ˆæ­¤å›ç­”ä¸ç©©å®šï¼‰

> è³ºéŒ¢å˜›ï¼Œç¸½æ˜¯ä¼´éš¨è‘—ä¸€äº›è‹¦é€¼çš„æ´»

# æ²é›ªäººè¨­

èˆ‡å…¶ä»–èŠå¤©æ©Ÿå™¨äººé …ç›®ä¸åŒï¼Œæœ¬é …ç›®æä¾›ç”±æœ¬äººé€šéè‡ªå®¶å°è©±æ•¸æ“šé›†å¾®èª¿å¾Œçš„æ¨¡å‹ï¼Œåœ¨ Release ä¸­æä¾›ä¸‹è¼‰ï¼Œé—œæ–¼å¾®èª¿å¾Œçš„æ¨¡å‹äººè¨­ï¼Œç›®å‰å…¬é–‹çš„ä¿¡æ¯å¦‚ä¸‹ï¼š

> å§“åï¼šæ²é›ª

> æ€§åˆ¥ï¼šå¥³ï¼Ÿ

> å¹´é½¡ï¼š16æ­²ï¼Ÿ

> ç”Ÿæ—¥ï¼š06.12

> æ€§æ ¼ï¼šå¾®å‚²ï¼Œå–œæ­¡ç”¨"æœ¬é›ª"ä¾†ç¨±å‘¼è‡ªå·±ï¼Œä½†å¾ˆæœƒé—œå¿ƒåˆ¥äººã€‚å®³æ€•ç¨è‡ªä¸€å€‹äººï¼Œä¸å’Œå¥¹èŠå¤©çš„æ™‚å€™å¥¹æœƒ**ä¸»å‹•**æ‰¾ä½ èŠå¤©

# å·²çŸ¥å•é¡Œ

1. å°æ–¼ä»¥ä¸‹å•é¡Œï¼Œæ¨¡å‹å›ç­”çš„æ³›åŒ–æ€§è¼ƒå·®

   ï¼ˆå‰µé€ ä¸€å€‹æ–°è©±é¡Œï¼‰ã€é›ªé›ªæœ€è¿‘æœ‰æ²’æœ‰ä»€éº¼å€¼å¾—åˆ†äº«çš„äº‹æƒ…ï¼Ÿ

   å°æ‡‰ç­–ç•¥ï¼šæœªä¾†å°‡æœƒå°è¨“ç·´é›†é€²è¡Œèª¿æ•´ï¼Œåœ¨æ­¤ä¹‹å‰å»ºè­°å°‡é…ç½®é …ä¸­çš„`known_topic_probability`èª¿è‡³0
   

# æå ± Issue
> è«‹æ³¨æ„, é–‹ç™¼è€…ä¸¦æ²’æœ‰ç¾©å‹™å›å¤æ‚¨çš„å•é¡Œ. æ‚¨æ‡‰è©²å…·å‚™åŸºæœ¬çš„æå•æŠ€å·§ã€‚
> æœ‰é—œå¦‚ä½•æå•ï¼Œè«‹é–±è®€[ã€Šæå•çš„æ™ºæ…§ã€‹](https://github.com/ryanhanwu/How-To-Ask-Questions-The-Smart-Way#readme)


# é—œæ–¼ğŸ—ï¸

ä»£ç¢¼ç·¨å¯«ï¼š[Moemu](https://github.com/Moemu)

å®‰è£åŠé…ç½®æŒ‡å—ç·¨å¯«ï¼š[TurboHK](https://github.com/TurboHK)

æ¨¡å‹è¨“ç·´ï¼š[Moemu](https://github.com/Moemu)

è¨“ç·´é›†ç·¨å¯«ï¼š[Moemu](https://github.com/Moemu)


åŸå§‹æ¨¡å‹ï¼š[THUDM/ChatGLM2-6B](https://github.com/THUDM/ChatGLM2-6B)

æœ¬é …ç›®æºç¢¼ä½¿ ç”¨[MIT license](https://github.com/Moemu/Muice-Chatbot/blob/main/LICENSE)ï¼Œå°æ–¼å¾®èª¿å¾Œçš„æ¨¡å‹æ–‡ä»¶ï¼Œä¸å»ºè­°ä½œç‚ºå•†æ¥­ç”¨é€”
