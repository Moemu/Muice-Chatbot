![](src/Cover.png)
<p align="center">
<img src="https://img.shields.io/github/stars/Moemu/Muice-Chatbot" alt="Stars">
<img src="https://img.shields.io/badge/Model-ChatGLM2--6B-green" alt="Model">
<img src="https://img.shields.io/badge/Python-3.10-blue" alt="Python">
</p>

<p align="center">
  <a href="https://github.com/Moemu/Muice-Chatbot/blob/main/Readme_zh-tw.md">ç¹ä½“ä¸­æ–‡ç‰ˆ</a>
</p>

# ä»‹ç»âœ¨

æ²é›ªï¼Œä¸€åªä¼š**ä¸»åŠ¨**æ‰¾ä½ èŠå¤©çš„AIå¥³å­©å­ï¼Œå…¶å¯¹è¯æ¨¡å‹åŸºäº[ChatGLM2-6B](https://github.com/THUDM/ChatGLM2-6B) å¾®è°ƒè€Œæˆï¼Œè®­ç»ƒé›†é•¿åº¦1.3K+ *ï¼Œå…·æœ‰äºŒæ¬¡å…ƒå¥³å­©å­çš„è¯´è¯é£æ ¼ï¼Œæ¯”è¾ƒå‚²å¨‡ï¼Œä½†ä¹äºå’Œä½ åˆ†äº«ç”Ÿæ´»çš„çç¢ï¼Œæ¯å¤©ä¼šç»™ä½ ä¸ä¸€æ ·çš„é—®å€™ã€‚

*ï¼šï¼ˆè®­ç»ƒé›†é•¿åº¦è¾ƒä½ï¼Œä½†æˆ‘ä»¬ä»åœ¨æ”¶é›†å¯¹è¯æ•°æ®ï¼‰

# åŠŸèƒ½ğŸª„

âœ” æä¾›æœ¬äººç”± 1.3k+ å¯¹è¯æ•°æ®å¾®è°ƒçš„ ChatGLM2-6B P-Tuning V2 æ¨¡å‹ï¼ˆå›ç­”åŸåˆ›ç‡ï¼š98%+ï¼‰

âœ” ä¸»åŠ¨å‘èµ·èŠå¤©ï¼ˆå±€é™äºå·²æœ‰çš„ Promptï¼‰

âœ” æä¾›5æ¡å¯ç”¨çš„å‘½ä»¤

# ä½¿ç”¨å‰é¡»çŸ¥âš ï¸
- **æœ¬é¡¹ç›®ä¸é€‚åˆé›¶åŸºç¡€çš„å°ç™½ä½¿ç”¨!**
- è¯¥é¡¹ç›®ä¾èµ–pytorchï¼Œè‹¥ä¸ä½¿ç”¨æ”¯æ´[ CUDA ï¼ˆCompute Unified Device Architectureï¼Œç»Ÿä¸€è®¡ç®—æ¶æ„ï¼‰ ](https://developer.nvidia.com/about-cuda) çš„æ˜¾å¡ï¼ˆNVIDIA ç³»åˆ—æ˜¾ç¤ºå¡ï¼‰ï¼Œå¤„ç†æ•ˆç‡ä¼šå¤§å¹…é™ä½ã€‚



# Windows ç‰ˆæœ¬å®‰è£…åŠé…ç½®æŒ‡å—ğŸªŸ

## 1. æœ€ä½³ç³»ç»Ÿé…ç½®
- ä½œä¸šç³»ç»Ÿï¼šWindows 10 åŠä»¥ä¸Š/Windows Server 2012 åŠä»¥ä¸Š
- å¤„ç†å™¨ï¼šx86 æ¶æ„ï¼ˆARM å¯èƒ½ä¼šå‡ºç°æ„æ–™ä¹‹å¤–çš„é—®é¢˜ï¼‰
- æ˜¾ç¤ºå¡ï¼šæ”¯æ´ CUDA è¿ç®—ï¼Œ16GB åŠä»¥ä¸Šæ˜¾ç¤ºè®°å¿†ä½“ï¼ˆåœ¨æ—¥åçš„æ›´æ–°ä¸­ï¼Œå°†ä¼šé’ˆå¯¹æ˜¾ç¤ºè®°å¿†ä½“éœ€æ±‚é«˜çš„é—®é¢˜è¿›è¡Œä¼˜åŒ–ï¼‰

## 2. é…ç½®è¿è¡Œç¯å¢ƒ

###  å®‰è£… Python 3.10.9

#### 1. ä» [Python.org](https://www.python.org/downloads/release/python-3109/) ä¸‹è½½é€‚åˆæ‚¨ç³»ç»Ÿçš„å®‰è£…åŒ…
#### 2. å®‰è£…é€‰é¡¹é€‰æ‹© ```Install for All Users``` åŠ ```Add to PATH```
#### 3. å®Œæˆå®‰è£…

### å®‰è£… conda
#### 1. ä» [Anacoda.com](https://www.anaconda.com/download/) ä¸‹è½½é€‚åˆæ‚¨ç³»ç»Ÿçš„å®‰è£…åŒ…
#### 2. å®‰è£…é€‰é¡¹é€‰æ‹© ```Install for All Users``` åŠ ```Add to PATH```

### æ·»åŠ  conda è‡³ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­
#### 1. å³é”®ç‚¹æŒ‰```æ­¤ç”µè„‘```ï¼ˆ```This PC```ï¼‰âˆ’âˆ’>```å±æ€§```ï¼ˆ```Porperties```ï¼‰
#### 2. æ‰¾åˆ°```é«˜çº§ç³»ç»Ÿè®¾ç½®```ï¼ˆ```Advanced System Settings```ï¼‰âˆ’âˆ’>```ç¯å¢ƒå˜é‡```ï¼ˆ```Environment Variables...``ï¼‰
#### 3. åœ¨```ç”¨æˆ·å˜é‡```ï¼ˆ```User variables for [Your Username]``` ï¼‰ä¸­æ‰¾åˆ°```Path```ä¸€æ ï¼Œç‚¹é€‰```ç¼–è¾‘`` `ï¼ˆ```Edit```ï¼‰âˆ’âˆ’>```æ–°å¢```ï¼ˆ```New```ï¼‰ï¼Œæ–°å¢ Anacoda è·¯å¾„ã€‚ ï¼ˆé¢„è®¾è·¯å¾„ä¸º```C:\ProgramData\anaconda3\Library\bin```ã€```C:\ProgramData\anaconda3\Scripts```å’Œ```C:\ProgramData\anaconda3```ï¼Œè¿™ä¸‰è€…éƒ½éœ€è¦æ–°å¢åˆ°Path ä¸­ï¼‰

### å®‰è£… Pytorch
#### 1. ä»[Pytorch.org](https://pytorch.org/get-started/locally/) äº§ç”Ÿå¹¶å¤åˆ¶é€‚åˆæ‚¨è®¾å¤‡ç»Ÿçš„å‘½ä»¤ï¼ˆè¯·åœ¨```Package``` ä¸€æ ä¸­é€‰æ‹©```conda```ï¼Œåœ¨```Language``` ä¸€æ ä¸­é€‰æ‹©```Python```ï¼›è‹¥æ‚¨çš„æ˜¾ç¤ºå¡æ”¯æŒ CUDAï¼Œè¯·åœ¨```Compute Platform``` ä¸€æ é€‰æ‹©ç›¸åº”çš„ CUDA ç‰ˆæœ¬ï¼Œå¦åˆ™é€‰```CPU```ï¼‰
#### 2. åœ¨æ‚¨çš„è®¾å¤‡ä¸Šä½¿ç”¨ç®¡ç†å‘˜æƒé™å¯åŠ¨ ```å‘½ä»¤æç¤ºç¬¦```ï¼ˆ```cmd```ï¼‰ï¼Œç²˜è´´å¹¶æ‰§è¡Œä¸Šä¸€æ­¥å¤åˆ¶çš„å®‰è£…å‘½ä»¤ï¼Œç­‰å¾…å®‰è£…å®Œæˆ


## 3. å®‰è£…åŠé…ç½®é¡¹ç›®

### ä½¿ç”¨ conda

#### åœ¨ Powershell ä¸­æ‰§è¡Œä¸‹åˆ—å‘½ä»¤ï¼š

```Powershell
git clone https://github.com/Moemu/Muice-Chatbot
cd Muice-Chatbot
conda create --name Muice python=3.10.9
conda activate Muice
pip install -r requirements.txt
```

### å…‹éš†æ¨¡å‹

#### åœ¨ä¸Šä¸€æ­¥äº§ç”Ÿçš„ `Muice-Chatbot` èµ„æ–™å¤¹ä¸­æ‰§è¡Œä¸‹åˆ—å‘½ä»¤ï¼š
```
mkdir model
cd model
git lfs install
git clone https://huggingface.co/THUDM/chatglm2-6b
cd ..
```
æ¡£æ¡ˆè¾ƒå¤§ï¼Œä¸‹è½½éœ€æ—¶è¾ƒä¹…ï¼Œè¯·è€å¿ƒç­‰å¾…ã€‚

### ä¸‹è½½å¾®è°ƒåçš„æ¨¡å‹å‹ç¼©æ–‡ä»¶

ä» [Releases](https://github.com/Moemu/Muice-Chatbot/releases) ä¸‹è½½å¾®è°ƒåçš„æ¨¡å‹å‹ç¼©æ¡£ï¼Œè§£å‹ç¼©åå°†å…¶é‡æ–°å‘½åä¸º `Muice` å¹¶ç½®äº `model` æ–‡ä»¶å¤¹ä¸­


### é…ç½® go-cqhttp
æœ¬é¡¹ç›®ç›®ä½¿ç”¨[go-cqhttp](https://github.com/Mrs4s/go-cqhttp) è¿›è¡Œæœºå™¨äººäº¤äº’ï¼Œè¯·ä»å…¶[Releases](https://github.com/Mrs4s/go-cqhttp/releases ) ä¸­ä¸‹è½½ç›¸åº”çš„ç‰ˆæœ¬åŠå¤„ç†ç¨‹å¼ï¼Œå¹¶ç½®äº`qqbot` æ–‡ä»¶å¤¹ä¸­

æœ‰å…³go-cqhttp çš„è¯¦ç»†é…ç½®æ–¹æ³•åŠé—®é¢˜ï¼Œè¯·è®¿é—® [go-cqhttp ä¸»é¡µ](https://docs.go-cqhttp.org/) åŠå…¶ [Github é¡µé¢](https://github.com/Mrs4s/ go-cqhttp)

### æ¡£æ¡ˆç»“æ„
åœ¨æœ€åï¼Œæ‚¨åº”è¯¥å¾—åˆ°ç±»ä¼¼å¦‚ä¸‹æ‰€ç¤ºçš„æ–‡ä»¶ç»“æ„ï¼š
```
Muice-Chatbot    <- ä¸»è·¯å¾„
 â”œâ”€llm
 â”œâ”€model
 â”‚  â”œâ”€ chatglm2-6b
 â”‚  â””â”€ Muice
 â”œâ”€qqbot
 â”‚  â”œâ”€go-cqhttp.exe
 â”‚  â””â”€...
 â”œâ”€configs.json  <- Muice è®¾å®šæ¡£
 â”œâ”€main.py       <- ä¸»å¤„ç†ç¨‹åº
 â”œâ”€requirements.txt
 â””â”€...
```

### é…ç½® Muice
æœ¬é¡¹ç›®ä½¿ç”¨ `configs.json` ä½œä¸ºè®¾å®šæ¡£ï¼Œç›®å‰æ”¯æ´å¦‚ä¸‹åŠŸèƒ½ï¼š

```json
{
    // ä¿¡ä»»QQå·åˆ—è¡¨ï¼Œåªæœ‰åœ¨åˆ—è¡¨çš„QQå·ï¼Œæ²é›ªæ‰ä¼šå›å¤
    "Trust_QQ_list": [
        123456789,
        987654321
    ],
    // æ˜¯å¦è‡ªåŠ¨å‘èµ·æ–°å¯¹è¯ï¼Œé»˜è®¤ä»¥Trust_QQ_listçš„ç¬¬0é¡¹ä½œä¸ºå‘èµ·æ–°å¯¹è¯å¯¹è±¡
    "AutoCreateTopic": false,
    // ä»æ–‡ä»¶ä¸­è¯»å–è®°å¿†ï¼Œç”¨äºé¡¹ç›®é‡å¯ååŠ è½½åŸæ¥çš„è®°å¿†
    "read_memory_from_file": true,
    // æ¦‚ç‡ï¼šéšæœºå‘èµ·ä¸€ä¸ªå·²çŸ¥çš„è¯é¢˜
    "known_topic_probability": "0.003",
    // æ¦‚ç‡ï¼šæ—©ã€ä¸­ã€å‚ã€æ™šè§¦å‘æ—¥å¸¸é—®å€™
    "time_topic_probability": "0.75"
}
```

## 4. å¯åŠ¨
åœ¨æ ¹è·¯å¾„ï¼ˆ```Muice-Chatbot``` èµ„æ–™å¤¹ï¼‰ä¸­å¼€å¯ Powershellï¼Œé€è¡Œé”®å…¥ä»¥ä¸‹å‘½ä»¤ï¼š
```powershell
conda activate Muice
python main.py
```

# å‘½ä»¤ğŸ•¹ï¸

|  å‘½ä»¤   | é‡Šä¹‰  |
|  ----  | ----  |
| /clean  | æ¸…ç©ºæœ¬è½®å¯¹è¯å†å² |
| /refresh  | åˆ·æ–°æœ¬æ¬¡å¯¹è¯ |
| /help  | æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨çš„å‘½ä»¤åˆ—è¡¨ |
| /reset  | é‡ç½®æ‰€æœ‰å¯¹è¯æ•°æ®(å°†å­˜æ¡£å¯¹è¯æ•°æ®) |
| /undo  | æ’¤é”€ä¸Šä¸€æ¬¡å¯¹è¯ |

# ç¤ºä¾‹å¯¹è¯

Q: ä½ å¥½

> ä½ å¥½ï¼Œä½ ä»Šå¤©æ„Ÿè§‰æ€ä¹ˆæ ·ï¼Ÿ

Q: ä½ çŸ¥é“çŒ«å¨˜å˜›

> å””...ä¸å¤ªçŸ¥é“å–µ...

Q: é›ªé›ªå–œæ¬¢åƒä»€ä¹ˆï¼Ÿ

>åƒÂ·ä½ Â·è€Œå·²

Q: å·¥ä½œåˆå¿™åˆç´¯ï¼Œè¿˜è¦åŠ ç­ä»€ä¹ˆçš„ï¼ˆæ­¤å›ç­”ä¸ç¨³å®šï¼‰

> èµšé’±å˜›ï¼Œæ€»æ˜¯ä¼´éšç€ä¸€äº›è‹¦é€¼çš„æ´»

# æ²é›ªäººè®¾

ä¸å…¶ä»–èŠå¤©æœºå™¨äººé¡¹ç›®ä¸åŒï¼Œæœ¬é¡¹ç›®æä¾›ç”±æœ¬äººé€šè¿‡è‡ªå®¶å¯¹è¯æ•°æ®é›†å¾®è°ƒåçš„æ¨¡å‹ï¼Œåœ¨ Release ä¸­æä¾›ä¸‹è½½ï¼Œå…³äºå¾®è°ƒåçš„æ¨¡å‹äººè®¾ï¼Œç›®å‰å…¬å¼€çš„ä¿¡æ¯å¦‚ä¸‹ï¼š

> å§“åï¼šæ²é›ª

> æ€§åˆ«ï¼šå¥³ï¼Ÿ

> å¹´é¾„ï¼š16å²ï¼Ÿ

> ç”Ÿæ—¥ï¼š06.12

> æ€§æ ¼ï¼šå¾®å‚²ï¼Œå–œæ¬¢ç”¨"æœ¬é›ª"æ¥ç§°å‘¼è‡ªå·±ï¼Œä½†å¾ˆä¼šå…³å¿ƒåˆ«äººã€‚å®³æ€•ç‹¬è‡ªä¸€ä¸ªäººï¼Œä¸å’Œå¥¹èŠå¤©çš„æ—¶å€™å¥¹ä¼š**ä¸»åŠ¨**æ‰¾ä½ èŠå¤©

# å·²çŸ¥é—®é¢˜

1. å¯¹äºä»¥ä¸‹é—®é¢˜ï¼Œæ¨¡å‹å›ç­”çš„æ³›åŒ–æ€§è¾ƒå·®

   ï¼ˆåˆ›é€ ä¸€ä¸ªæ–°è¯é¢˜ï¼‰ã€é›ªé›ªæœ€è¿‘æœ‰æ²¡æœ‰ä»€ä¹ˆå€¼å¾—åˆ†äº«çš„äº‹æƒ…ï¼Ÿ

   å¯¹åº”ç­–ç•¥ï¼šæœªæ¥å°†ä¼šå¯¹è®­ç»ƒé›†è¿›è¡Œè°ƒæ•´ï¼Œåœ¨æ­¤ä¹‹å‰å»ºè®®å°†é…ç½®é¡¹ä¸­çš„`known_topic_probability`è°ƒè‡³0
   

# ææŠ¥ Issue
> è¯·æ³¨æ„, å¼€å‘è€…å¹¶æ²¡æœ‰ä¹‰åŠ¡å›å¤æ‚¨çš„é—®é¢˜. æ‚¨åº”è¯¥å…·å¤‡åŸºæœ¬çš„æé—®æŠ€å·§ã€‚
> æœ‰å…³å¦‚ä½•æé—®ï¼Œè¯·é˜…è¯»[ã€Šæé—®çš„æ™ºæ…§ã€‹](https://github.com/ryanhanwu/How-To-Ask-Questions-The-Smart-Way#readme)


# å…³äºğŸ—ï¸

ä»£ç ç¼–å†™ï¼š[Moemu](https://github.com/Moemu)

å®‰è£…åŠé…ç½®æŒ‡å—ç¼–å†™ï¼š[TurboHK](https://github.com/TurboHK)

æ¨¡å‹è®­ç»ƒï¼š[Moemu](https://github.com/Moemu)

è®­ç»ƒé›†ç¼–å†™ï¼š[Moemu](https://github.com/Moemu)


åŸå§‹æ¨¡å‹ï¼š[THUDM/ChatGLM2-6B](https://github.com/THUDM/ChatGLM2-6B)

æœ¬é¡¹ç›®æºç ä½¿ç”¨ [MIT license](https://github.com/Moemu/Muice-Chatbot/blob/main/LICENSE)ï¼Œå¯¹äºå¾®è°ƒåçš„æ¨¡å‹æ–‡ä»¶ï¼Œä¸å»ºè®®ä½œä¸ºå•†ä¸šç”¨é€”
